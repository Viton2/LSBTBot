plugins {
    id 'java'
    id 'application' // Isto é necessário para tornar o projeto executável.
    id 'com.github.johnrengelman.shadow' version '7.1.0' // Use a versão mais recente do plugin shadow.
}

apply plugin: 'application'

mainClassName = 'LSBT.Bot'


group = 'los.bostas'
version = '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

dependencies {
    testImplementation platform('org.junit:junit-bom:5.9.1')
    testImplementation 'org.junit.jupiter:junit-jupiter'
    implementation("net.dv8tion:JDA:5.0.0-beta.9")
}

//jar {
//    archiveBaseName = 'lsbtBot-v1.0-gradle'
//    archiveVersion = '0.1.0'
//    manifest {
//        attributes(
//                'Main-Class': 'LSBT.Bot'
//        )
//    }
//}

shadowJar {
    archiveClassifier.set('')
    archiveVersion.set('')
    archiveBaseName.set('LSBTBot')

    // Configuração para incluir todas as dependências necessárias no JAR
    mergeServiceFiles {
        include 'META-INF/services/*'
    }

    // Certifique-se de que a task 'build' dependa da task 'shadowJar'
    build.dependsOn shadowJar

    test {
        useJUnitPlatform()
    }
}